C51 COMPILER V9.00   LED                                                                   06/10/2020 17:50:12 PAGE 1   


C51 COMPILER V9.00, COMPILATION OF MODULE LED
OBJECT MODULE PLACED IN ..\obj\led.obj
COMPILER INVOKED BY: D:\Program Files\KEILC51\files\C51\BIN\C51.EXE ..\..\user\led.c BROWSE DEBUG OBJECTEXTEND PRINT(.\l
                    -ed.lst) TABS(2) OBJECT(..\obj\led.obj)

line level    source

   1          /**
   2            ******************************************************************************
   3            * @file    
   4            * @author  
   5            * @version 
   6            * @date   
   7            * @brief   
   8            ******************************************************************************  
   9            * 
  10            * 
  11            ******************************************************************************
  12            */
  13          /*-- includes ----------------------------------------------------------------*/
  14          #include "./led.h"
  15          #include "./print.h"
  16          
  17          
  18          /*-- defined -----------------------------------------------------------------*/
  19          #define        DB_LOG(x)                  LOG("[LED]");LOG(x)
  20          
  21          #define        TIME_MS(x)                 (x)
  22          
  23                                                     
  24          #define        IO_LED1_MODE()              P11_PushPull_Mode
  25          #define        IO_LED2_MODE()              P12_PushPull_Mode
  26          #define        IO_LED3_MODE()              P13_PushPull_Mode
  27          #define        IO_LED4_MODE()              P14_PushPull_Mode
  28                                                                         
  29          
  30          
  31          
  32          /*-- private variables -------------------------------------------------------*/
  33          static   tick_size_t XDATA ledTaskBaseTr = 0;
  34          
  35          
  36          static  u8_t  XDATA  testLedTime = 0;
  37          
  38          /*-- functions ---------------------------------------------------------------*/
  39          static    void    led_task_timer_schedule(void);
  40          static    void    led_task_logic_schedule(void);
  41          
  42          
  43          /**           
  44            * @brief            
  45            * @param    
  46            * @return  
  47            * @note
  48            */
  49          static  void  led_task_timer_schedule(void)
  50          {
  51   1        TASK_TIMER_BEGIN(ledTaskBaseTr, TIME_MS(100));
  52   3      
  53   3        if(testLedTime > 0)  testLedTime--;
  54   3      
C51 COMPILER V9.00   LED                                                                   06/10/2020 17:50:12 PAGE 2   

  55   3        TASK_TIMER_END(ledTaskBaseTr);
  56   1      }
  57          
  58          
  59          /**           
  60            * @brief            
  61            * @param    
  62            * @return  
  63            * @note
  64            */
  65          static  void  led_task_logic_schedule(void)
  66          {
  67   1        if(testLedTime == 0)  
  68   1        {
  69   2          testLedTime = 10;
  70   2          //LED1_TOGGLE(); LED2_OFF(); LED3_OFF(); LED4_OFF();
  71   2          //DB_LOG("led task running.\r\n");
  72   2        }
  73   1      }
  74          
  75          
  76          /**           
  77            * @brief            
  78            * @param    
  79            * @return  
  80            * @note
  81            */
  82          void   led_task(void)  _task_   LED_TASK_PRIORITY
  83          {
  84   1        /* Led pin configure. */
  85   1        IO_LED1_MODE(); IO_LED2_MODE(); IO_LED3_MODE(); IO_LED4_MODE();
  86   1      
  87   1        while(1)
  88   1        {
  89   2          led_task_timer_schedule();
  90   2          led_task_logic_schedule();   
  91   2        }
  92   1      }
  93          
  94          
  95          
  96          
  97          /*---------------------- end of file -----------------------------------------*/
  98          
  99          
 100          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     77    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =      2    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
